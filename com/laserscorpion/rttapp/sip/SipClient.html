<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_71) on Tue Sep 13 14:59:22 EDT 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SipClient</title>
<meta name="date" content="2016-09-13">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SipClient";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/laserscorpion/rttapp/sip/SipRequester.html" title="class in com.laserscorpion.rttapp.sip"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/laserscorpion/rttapp/sip/SipClient.html" target="_top">Frames</a></li>
<li><a href="SipClient.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.laserscorpion.rttapp.sip</div>
<h2 title="Class SipClient" class="title">Class SipClient</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.laserscorpion.rttapp.sip.SipClient</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>android.javax.sip.SipListener, <a href="../../../../com/laserscorpion/rttapp/sip/ConnectivityReceiver.IPChangeListener.html" title="interface in com.laserscorpion.rttapp.sip">ConnectivityReceiver.IPChangeListener</a>, java.util.EventListener</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">SipClient</span>
extends java.lang.Object
implements android.javax.sip.SipListener, <a href="../../../../com/laserscorpion/rttapp/sip/ConnectivityReceiver.IPChangeListener.html" title="interface in com.laserscorpion.rttapp.sip">ConnectivityReceiver.IPChangeListener</a></pre>
<div class="block"><p>This is the core of the SIP layer, and the entire app. All SIP messages are received here, and
 sent from here via SipRequester/SipResponder/SipTransactionRequester. It is a singleton, as it
 makes up much of the app, so the proper usage is <em>first</em> call init() and <em>then</em>
 call getInstance() whenever a handle to this class is needed. If necessary later, calling
 reset() re-initializes some of the parameters from init(). When disconnecting from the server or
 quitting, it is necessary to call close().</p>
 <pre>
     --------------
     |  UI layer  |
     --------------
            |
     <strong>--------------
     | SIP layer  |  (SipClient)
     --------------</strong>
            |
     --------------
     | Call layer |  (RTTCall)
     --------------
            |
     --------------
     | RTP layer  |  (JRTP, Omnitor t140)
     --------------
 </pre>
 <p>Though RTTCall runs the actual RTP sessions, SipClient is responsible for negotiating the
 session, and it can only manage one call at a time. It knows when a call is currently connected,
 or ringing, because it arranges it via SIP messages, interaction from the UI layer above, and
 creating each RTTCall. If a call comes in while another one is in progress, SipClient responds
 486 Busy Here. onACallNow() indicates whether a call is in progress. An RTTCall is created early
 in the call establishing sequence, and SipClient later updates RTTCall when the call is fully
 agreed upon and the RTP parameters are available.</p>

 <p>The incoming call (acceptance) sequence is a bit hairy and involves the other layers. This could
 probably use some refactoring or at least refinement to ensure reliability. This sequence grew
 out of experience with the concurrency problems surrounding duplicate or multiple requests coming
 in simultaneously, and the desire to only handle one call at a time. The steps are as follows:</p>
 <pre>
 1. INVITE received
 2. receiveCall():
      a. <strong>tries</strong> to acquire callLock, and holds it to prevent any other calls being created
      b. checks if onACallNow()
      c. responds 180 Ringing
      d. creates RTTCall
      e. alerts callReceiver (CallReceiver listener in UI layer) that a call is ringing
 3. UI layer accepts or declines call
      a. calls SipClient.acceptCall()
      b. or SipClient.declineCall()
 4. acceptCall():
      a. sends 200 OK response
      b. releases callLock, and now relies on onACallNow() to detect business
 5. ACK received
 6. beginCall():
      a. gives RTP params to RTTCall
      b. waits for UI to get ready to receive text
      c. updates RTTCall's list of TextReceivers and tells it to start
      d. tells UI layer that call is established with notifySessionEstablished()</pre>
 <p>Some of this complication is unavoidable due to SIP's multi-step process, but the locking is
 especially weird, I know. It's sketchy to acquire a lock, wait for some other part of the app
 to do something, assume the lock is still held, and then later release it. The purpose of the
 lock is to prevent simultaneous INVITEs from triggering receiveCall(), so it seems like it could
 be released after creating the RTTCall, but my fuzzy memory suggests that some problem occurred.
 There's a reason I didn't release the lock until later, but now that I have forgotten it, I feel
 bad telling you not to change this. This might be ok to change, but beware. Getting it right with
 all the incoming traffic I was seeing was tough, so I'm wary of breaking it, but it's probably
 fragile as it is now anyway.</p>

 <p>All network communication in this class, and indeed this layer, is done by helper AsyncTask
 subclasses, e.g. SipRequester. This might not really be necessary. Android is strict about using
 the network on the main thread, which is usually good, but in this case sort of annoying. You don't
 really want to be doing TCP on the main thread, but the only network stuff that SipClient is
 doing is sending SIP messages over UDP, which basically happens immediately, no waiting involved.
 So we could disable this restriction with StrictMode.ThreadPolicy.LAX? This would allow us to
 get rid of the unwieldy AsyncTasks. The main concern is whether setting this global option would
 have other unintended consequences in other parts of the app.</p>

 <p>SipClient is listening for changes in internet connectivity, specifically changes in the IP
 address, which happens often enough to really care about it on a mobile device.
 When the IP changes, it must re-register with the server at the new address. If this
 happens during a call, the call will mysteriously hang, so SipClient will end a call if it
 detects this change.</p>

 <p>Other classes often need to receive messages from SipClient, when network/call state changes.
 Thus it has lists of listeners of various types, managed with methods such as
 addSessionListener()/removeSessionListener(). When an event occurs that interests those listeners,
 SipClient notifies all of them, if there is more than one, with a method such as e.g.
 notifySessionClosed().</p>

 <p>Currently SipClient does not do a great job correlating sequences of messages, e.g. a request
 we sent and the response to it that we get back. It should probably maintain a data structure of
 Requests and Responses it has sent, and the transactions/dialogs involved in them, to
 definitively know the purpose of some incoming message, whether a SIP message or something from
 the SipStack, like a TransactionTerminated message. This would also help weed out stray messages
 that we don't care about.</p>

 <p>Some of this class based on http://alex.bikfalvi.com/teaching/upf/2013/architecture_and_signaling/lab/sip/</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#acceptCall--">acceptCall</a></span>()</code>
<div class="block">The CallReceiver (likely on an upper layer) <em>must</em> call either this or declineCall()
 when an incoming call is ringing.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#addSessionListener-com.laserscorpion.rttapp.sip.SessionListener-">addSessionListener</a></span>(<a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip">SessionListener</a>&nbsp;newListener)</code>
<div class="block">register a listener as interested in receiving session-related notifications</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#addTextReceiver-com.laserscorpion.rttapp.sip.TextListener-">addTextReceiver</a></span>(<a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;newReceiver)</code>
<div class="block">This method should be called when a user of SipClient needs to register a new
 receiver for the SipClient's text output.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#call-java.lang.String-">call</a></span>(java.lang.String&nbsp;URI)</code>
<div class="block">Initiate a new call to the given SIP URI.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#close--">close</a></span>()</code>
<div class="block">This must be called when the SipClient is done and will not be used again, to close ports
 and delete broadcast receivers.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#declineCall--">declineCall</a></span>()</code>
<div class="block">The CallReceiver (likely on an upper layer) <em>must</em> call either this or acceptCall()
 when an incoming call is ringing.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#finalize--">finalize</a></span>()</code>
<div class="block">In case close() is not called properly by the rest of the app</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html" title="class in com.laserscorpion.rttapp.sip">SipClient</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#getInstance--">getInstance</a></span>()</code>
<div class="block">Get a handle to the single global SipClient
 Precondition: init() must be called first at least once</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#getLocalIP--">getLocalIP</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#hangUp--">hangUp</a></span>()</code>
<div class="block">This is a public method for an upper layer class to notify the SipClient that it wants to end
 the call.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#init-android.content.Context-java.lang.String-java.lang.String-java.lang.String-com.laserscorpion.rttapp.sip.TextListener-">init</a></span>(android.content.Context&nbsp;context,
    java.lang.String&nbsp;username,
    java.lang.String&nbsp;server,
    java.lang.String&nbsp;password,
    <a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;listener)</code>
<div class="block">Initializes the SipClient to prepare it to register with a server and make calls.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#IPAddrChanged--">IPAddrChanged</a></span>()</code>
<div class="block">ConnectivityReceiver.IPChangeListener interface callback</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processDialogTerminated-android.javax.sip.DialogTerminatedEvent-">processDialogTerminated</a></span>(android.javax.sip.DialogTerminatedEvent&nbsp;dialogTerminatedEvent)</code>
<div class="block">SipListener interface callback</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processIOException-android.javax.sip.IOExceptionEvent-">processIOException</a></span>(android.javax.sip.IOExceptionEvent&nbsp;ioExceptionEvent)</code>
<div class="block">SipListener interface callback</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processRequest-android.javax.sip.RequestEvent-">processRequest</a></span>(android.javax.sip.RequestEvent&nbsp;requestEvent)</code>
<div class="block">SipListener interface callback.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processResponse-android.javax.sip.ResponseEvent-">processResponse</a></span>(android.javax.sip.ResponseEvent&nbsp;responseEvent)</code>
<div class="block">SipListener interface callback.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processTimeout-android.javax.sip.TimeoutEvent-">processTimeout</a></span>(android.javax.sip.TimeoutEvent&nbsp;timeoutEvent)</code>
<div class="block">SipListener interface callback</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#processTransactionTerminated-android.javax.sip.TransactionTerminatedEvent-">processTransactionTerminated</a></span>(android.javax.sip.TransactionTerminatedEvent&nbsp;transactionTerminatedEvent)</code>
<div class="block">SipListener interface callback</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#register--">register</a></span>()</code>
<div class="block">tell the SipClient to register with the SIP server, given the credentials it currently has
 on hand.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#registerCallReceiver-com.laserscorpion.rttapp.sip.CallReceiver-">registerCallReceiver</a></span>(<a href="../../../../com/laserscorpion/rttapp/sip/CallReceiver.html" title="interface in com.laserscorpion.rttapp.sip">CallReceiver</a>&nbsp;receiver)</code>
<div class="block">Register some object as interested in listening for incoming calls.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#registrationExpired--">registrationExpired</a></span>()</code>
<div class="block">RegistrationTimerTask interface callback</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#removeSessionListener-com.laserscorpion.rttapp.sip.SessionListener-">removeSessionListener</a></span>(<a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip">SessionListener</a>&nbsp;existingListener)</code>
<div class="block">remove a listener from receiving session notifications</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#removeTextReceiver-com.laserscorpion.rttapp.sip.TextListener-">removeTextReceiver</a></span>(<a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;receiver)</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#reset-android.content.Context-java.lang.String-java.lang.String-java.lang.String-com.laserscorpion.rttapp.sip.TextListener-">reset</a></span>(android.content.Context&nbsp;context,
     java.lang.String&nbsp;username,
     java.lang.String&nbsp;server,
     java.lang.String&nbsp;password,
     <a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;listener)</code>&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#sendRTTChars-java.lang.String-">sendRTTChars</a></span>(java.lang.String&nbsp;add)</code>
<div class="block">Send some real-time text within the current call.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html#unregister--">unregister</a></span>()</code>
<div class="block">Tell the SipClient to remove its registration with the server, e.g.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init-android.content.Context-java.lang.String-java.lang.String-java.lang.String-com.laserscorpion.rttapp.sip.TextListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public static&nbsp;void&nbsp;init(android.content.Context&nbsp;context,
                        java.lang.String&nbsp;username,
                        java.lang.String&nbsp;server,
                        java.lang.String&nbsp;password,
                        <a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;listener)
                 throws android.javax.sip.SipException</pre>
<div class="block">Initializes the SipClient to prepare it to register with a server and make calls. Must be called
 before getInstance(). Calling again resets the parameters to the new ones (note that this will
 remove all previous TextListeners).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - </dd>
<dd><code>username</code> - </dd>
<dd><code>server</code> - </dd>
<dd><code>password</code> - </dd>
<dd><code>listener</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>android.javax.sip.SipException</code> - if the SIP stack can't be created, or the username/password/server can't be parsed correctly</dd>
</dl>
</li>
</ul>
<a name="reset-android.content.Context-java.lang.String-java.lang.String-java.lang.String-com.laserscorpion.rttapp.sip.TextListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset(android.content.Context&nbsp;context,
                  java.lang.String&nbsp;username,
                  java.lang.String&nbsp;server,
                  java.lang.String&nbsp;password,
                  <a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;listener)
           throws android.javax.sip.SipException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>android.javax.sip.SipException</code></dd>
</dl>
</li>
</ul>
<a name="getInstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../../com/laserscorpion/rttapp/sip/SipClient.html" title="class in com.laserscorpion.rttapp.sip">SipClient</a>&nbsp;getInstance()
                             throws java.lang.IllegalStateException</pre>
<div class="block">Get a handle to the single global SipClient
 Precondition: init() must be called first at least once</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a handle to the single global SipClient</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code></dd>
</dl>
</li>
</ul>
<a name="getLocalIP--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalIP</h4>
<pre>public&nbsp;java.lang.String&nbsp;getLocalIP()</pre>
</li>
</ul>
<a name="addTextReceiver-com.laserscorpion.rttapp.sip.TextListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTextReceiver</h4>
<pre>public&nbsp;void&nbsp;addTextReceiver(<a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;newReceiver)</pre>
<div class="block">This method should be called when a user of SipClient needs to register a new
 receiver for the SipClient's text output. e.g. when the SipClient is handed from
 one Activity to another when the foremost activity changes. The old receiver is
 removed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newReceiver</code> - the new object (e.g. an Activity) that wants to handle text
                    messages from from the SipClient. If null, the SipClient's
                    text output will not be processed by anyone.</dd>
</dl>
</li>
</ul>
<a name="registerCallReceiver-com.laserscorpion.rttapp.sip.CallReceiver-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerCallReceiver</h4>
<pre>public&nbsp;void&nbsp;registerCallReceiver(<a href="../../../../com/laserscorpion/rttapp/sip/CallReceiver.html" title="interface in com.laserscorpion.rttapp.sip">CallReceiver</a>&nbsp;receiver)</pre>
<div class="block">Register some object as interested in listening for incoming calls. It becomes
 the listener's job to accept or decline a call when one arrives.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>receiver</code> - the CallReceiver who should be notified when a call comes in.
                 There can only be one receiver listening for this message at a time.</dd>
</dl>
</li>
</ul>
<a name="removeTextReceiver-com.laserscorpion.rttapp.sip.TextListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeTextReceiver</h4>
<pre>public&nbsp;void&nbsp;removeTextReceiver(<a href="../../../../com/laserscorpion/rttapp/sip/TextListener.html" title="interface in com.laserscorpion.rttapp.sip">TextListener</a>&nbsp;receiver)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>receiver</code> - the TextReceiver that should no longer receive text messages</dd>
</dl>
</li>
</ul>
<a name="addSessionListener-com.laserscorpion.rttapp.sip.SessionListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSessionListener</h4>
<pre>public&nbsp;void&nbsp;addSessionListener(<a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip">SessionListener</a>&nbsp;newListener)</pre>
<div class="block">register a listener as interested in receiving session-related notifications</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newListener</code> - the new listener. If it already registered, nothing happens</dd>
</dl>
</li>
</ul>
<a name="removeSessionListener-com.laserscorpion.rttapp.sip.SessionListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSessionListener</h4>
<pre>public&nbsp;void&nbsp;removeSessionListener(<a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip">SessionListener</a>&nbsp;existingListener)</pre>
<div class="block">remove a listener from receiving session notifications</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>existingListener</code> - the listener to remove</dd>
</dl>
</li>
</ul>
<a name="sendRTTChars-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendRTTChars</h4>
<pre>public&nbsp;void&nbsp;sendRTTChars(java.lang.String&nbsp;add)
                  throws java.lang.IllegalStateException</pre>
<div class="block">Send some real-time text within the current call. A pretty important capability...</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>add</code> - the characters to send in the RTT session</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if not connected on a call</dd>
</dl>
</li>
</ul>
<a name="register--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>public&nbsp;void&nbsp;register()
              throws android.javax.sip.SipException</pre>
<div class="block">tell the SipClient to register with the SIP server, given the credentials it currently has
 on hand.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>android.javax.sip.SipException</code></dd>
</dl>
</li>
</ul>
<a name="unregister--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unregister</h4>
<pre>public&nbsp;void&nbsp;unregister()
                throws android.javax.sip.SipException</pre>
<div class="block">Tell the SipClient to remove its registration with the server, e.g. if the app is quitting</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>android.javax.sip.SipException</code></dd>
</dl>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>public&nbsp;void&nbsp;finalize()</pre>
<div class="block">In case close() is not called properly by the rest of the app</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">This must be called when the SipClient is done and will not be used again, to close ports
 and delete broadcast receivers.</div>
</li>
</ul>
<a name="call-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;void&nbsp;call(java.lang.String&nbsp;URI)
          throws android.javax.sip.SipException,
                 java.text.ParseException,
                 android.javax.sip.TransactionUnavailableException,
                 java.lang.InterruptedException,
                 java.util.concurrent.ExecutionException,
                 android.javax.sip.InvalidArgumentException</pre>
<div class="block">Initiate a new call to the given SIP URI.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>URI</code> - the other party's SIP address</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>android.javax.sip.SipException</code> - if the request couldn't be sent for some other reason</dd>
<dd><code>java.text.ParseException</code> - if the URI can't be parsed, or the contact's server is not valid</dd>
<dd><code>android.javax.sip.TransactionUnavailableException</code> - if already on a call, or if another error occurs</dd>
<dd><code>java.lang.InterruptedException</code></dd>
<dd><code>java.util.concurrent.ExecutionException</code></dd>
<dd><code>android.javax.sip.InvalidArgumentException</code></dd>
</dl>
</li>
</ul>
<a name="processRequest-android.javax.sip.RequestEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processRequest</h4>
<pre>public&nbsp;void&nbsp;processRequest(android.javax.sip.RequestEvent&nbsp;requestEvent)</pre>
<div class="block">SipListener interface callback.
 This method dispatches the incoming request to a helper depending on the SIP method</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processRequest</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="hangUp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hangUp</h4>
<pre>public&nbsp;void&nbsp;hangUp()</pre>
<div class="block">This is a public method for an upper layer class to notify the SipClient that it wants to end
 the call.
 Precondition: currently connected on or creating a call</div>
</li>
</ul>
<a name="acceptCall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptCall</h4>
<pre>public&nbsp;void&nbsp;acceptCall()
                throws java.lang.IllegalStateException</pre>
<div class="block">The CallReceiver (likely on an upper layer) <em>must</em> call either this or declineCall()
 when an incoming call is ringing. This begins the call.
 Precondition: a CallReceiver has been notified that a call is coming in</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if there is no call waiting to be accepted (possibly because it already hung up),
      or if we are otherwise not in the midst of setting up a new call</dd>
</dl>
</li>
</ul>
<a name="declineCall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>declineCall</h4>
<pre>public&nbsp;void&nbsp;declineCall()
                 throws java.lang.IllegalStateException</pre>
<div class="block">The CallReceiver (likely on an upper layer) <em>must</em> call either this or acceptCall()
 when an incoming call is ringing. This ignores the call.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - if there is no call waiting to be accepted (possibly because it already hung up),
      or if we are otherwise not in the midst of setting up a new call</dd>
</dl>
</li>
</ul>
<a name="processResponse-android.javax.sip.ResponseEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processResponse</h4>
<pre>public&nbsp;void&nbsp;processResponse(android.javax.sip.ResponseEvent&nbsp;responseEvent)</pre>
<div class="block">SipListener interface callback.
 This dispatches the incoming SIP response to a helper depending on the response code</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processResponse</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="registrationExpired--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registrationExpired</h4>
<pre>public&nbsp;void&nbsp;registrationExpired()</pre>
<div class="block">RegistrationTimerTask interface callback</div>
</li>
</ul>
<a name="processTimeout-android.javax.sip.TimeoutEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTimeout</h4>
<pre>public&nbsp;void&nbsp;processTimeout(android.javax.sip.TimeoutEvent&nbsp;timeoutEvent)</pre>
<div class="block">SipListener interface callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processTimeout</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="processIOException-android.javax.sip.IOExceptionEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processIOException</h4>
<pre>public&nbsp;void&nbsp;processIOException(android.javax.sip.IOExceptionEvent&nbsp;ioExceptionEvent)</pre>
<div class="block">SipListener interface callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processIOException</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="processTransactionTerminated-android.javax.sip.TransactionTerminatedEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTransactionTerminated</h4>
<pre>public&nbsp;void&nbsp;processTransactionTerminated(android.javax.sip.TransactionTerminatedEvent&nbsp;transactionTerminatedEvent)</pre>
<div class="block">SipListener interface callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processTransactionTerminated</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="processDialogTerminated-android.javax.sip.DialogTerminatedEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processDialogTerminated</h4>
<pre>public&nbsp;void&nbsp;processDialogTerminated(android.javax.sip.DialogTerminatedEvent&nbsp;dialogTerminatedEvent)</pre>
<div class="block">SipListener interface callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>processDialogTerminated</code>&nbsp;in interface&nbsp;<code>android.javax.sip.SipListener</code></dd>
</dl>
</li>
</ul>
<a name="IPAddrChanged--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IPAddrChanged</h4>
<pre>public&nbsp;void&nbsp;IPAddrChanged()</pre>
<div class="block">ConnectivityReceiver.IPChangeListener interface callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/laserscorpion/rttapp/sip/ConnectivityReceiver.IPChangeListener.html#IPAddrChanged--">IPAddrChanged</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/laserscorpion/rttapp/sip/ConnectivityReceiver.IPChangeListener.html" title="interface in com.laserscorpion.rttapp.sip">ConnectivityReceiver.IPChangeListener</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/laserscorpion/rttapp/sip/SessionListener.html" title="interface in com.laserscorpion.rttapp.sip"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/laserscorpion/rttapp/sip/SipRequester.html" title="class in com.laserscorpion.rttapp.sip"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/laserscorpion/rttapp/sip/SipClient.html" target="_top">Frames</a></li>
<li><a href="SipClient.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
